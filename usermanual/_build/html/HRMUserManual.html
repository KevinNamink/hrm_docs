

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>`CHAPTER 1 &lt;HRMUserManual.htm#50532372_pgfId-931907&gt;`__ Introduction 1 &mdash; Huygens Remote Manager 3.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Huygens Remote Manager 3.1 documentation" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="#" class="fa fa-home"> Huygens Remote Manager</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="simple">
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="#">Huygens Remote Manager</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="#">Docs</a> &raquo;</li>
      
    <li><em>`CHAPTER 1 &lt;HRMUserManual.htm#50532372_pgfId-931907&gt;`__</em> Introduction <em>1</em></li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/HRMUserManual.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="chapter-1-hrmusermanual-htm-50532372-pgfid-931907-introduction-1">
<span id="hrmusermanual"></span><h1><em>`CHAPTER 1 &lt;HRMUserManual.htm#50532372_pgfId-931907&gt;`__</em> Introduction <em>1</em><a class="headerlink" href="#chapter-1-hrmusermanual-htm-50532372-pgfid-931907-introduction-1" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="HRMUserManual.htm#50532372_pgfId-922046">What is HRM</a><em>1</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532372_pgfId-950142">Who makes HRM</a><em>1</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532372_pgfId-924652">Where to find HRM</a><em>1</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532372_pgfId-948166">Getting started</a><em>2</em></p>
</div>
<div class="section" id="chapter-2-hrmusermanual-htm-50532397-pgfid-919311-advanced-deconvolution-in-hrm-7">
<h1><em>`CHAPTER 2 &lt;HRMUserManual.htm#50532397_pgfId-919311&gt;`__</em> Advanced deconvolution in HRM <em>7</em><a class="headerlink" href="#chapter-2-hrmusermanual-htm-50532397-pgfid-919311-advanced-deconvolution-in-hrm-7" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-981610">The starting page</a><em>8</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-977030">Raw Images</a><em>8</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-962303">Start a Job</a><em>9</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-980755">Select images (1/5)</a><em>9</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-980597">The Image Parameters
(2/5)</a><em>11</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-979749">The Restoration Parameters
(3/5)</a><em>19</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-980981">Analysis parameters
(4/5)</a><em>23</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-981337">Launch the job (5/5)</a><em>24</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-933150">The Queue status</a><em>25</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-933349">Results</a><em>26</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-943824">Statistics</a><em>29</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-953085">Your account</a><em>29</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532397_pgfId-983051">Tips &amp; Tricks</a><em>30</em></p>
</div>
<div class="section" id="chapter-3-hrmusermanual-htm-50532368-pgfid-923766-administrators-guide-31">
<h1><em>`CHAPTER 3 &lt;HRMUserManual.htm#50532368_pgfId-923766&gt;`__</em> Administrator’s guide <em>31</em><a class="headerlink" href="#chapter-3-hrmusermanual-htm-50532368-pgfid-923766-administrators-guide-31" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="HRMUserManual.htm#50532368_pgfId-920061">Installation</a><em>31</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532368_pgfId-919947">Administrator’s
options</a><em>31</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532368_pgfId-919549">How HRM communicates with Huygens
Core</a><em>33</em></p>
<p><a class="reference external" href="HRMUserManual.htm#50532368_pgfId-925010">Requirements and technical
features</a><em>33</em></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p><img alt="image0" src="_images/HRMUserManual-1.gif" /></p>
<p>What is HRM</p>
<p>Welcome to the user guide for the Huygens Remote Manager (HRM)! HRM is a
web-based collaborative open-source interface to Huygens Core to do
multiuser, scheduled, batch deconvolution.</p>
<p>With a Huygens Remote Manager, it is possible for a large group of users
to work with Huygens on a central system through an easy interface.
Allowing for central administration in a cluster. It is web-based and
therefore easily accessible from many places. It can be accessed from
your workstation, home PC or tablet.</p>
<p>An HRM server can distribute work among several computers smartly, which
allows for intelligent use of calculation hardware and fast calculation
times. It combines flexibility in hardware choices with an intelligent
queue, allowing small jobs to go in between large ones.</p>
<p><img alt="image1" src="_images/HRMUserManual-1.gif" /></p>
<p>Who makes HRM</p>
<p>HRM is an open source project, this means that the code is freely
accessible and it can be adapted and modified to any needs by any user.
It is developed by Huygens users at the Montpellier Rio Imaging
facility, the Facility for Advanced Imaging and Microscopy at the
Friedrich Miescher Institute (FMI, Basel), the BioImaging and Optics
Platform at the Ecole Polytechnique Fédérale de Lausanne and the
Department of Biosystems Science and Engineering at the ETH Zürich.
Scientific Volume Imaging participates in this project by contributing
its experience in deconvolution and software engineering. HRM is a free
and open source.</p>
<p><img alt="image2" src="_images/HRMUserManual-1.gif" /></p>
<p>Where to find HRM</p>
<p>HRM is a free and open source project, and can be found in SourceForge
<a class="reference external" href="#50532361_pgfId-924454">1</a>.</p>
<p>More information about HRM and links to other HRM resources can be found
in the HRM online article of the SVI
Wiki<a class="reference external" href="#50532361_pgfId-924459">2</a>. Instructions for online testing,
downloading and installing HRM are also linked on that page.</p>
<p>Installing HRM on a running regular web server is very difficult. Apart
from the installation instructions that come along with the source code,
other practical guidelines can be found in the project’s official
site<a class="reference external" href="#50532361_pgfId-943475">3</a> and in the SVI Wiki
<a class="reference external" href="#50532361_pgfId-922732">4</a>.</p>
<p><img alt="image3" src="_images/HRMUserManual-1.gif" /></p>
<p>Getting started</p>
<p>Here is a quick guide to get you started with deconvolution. To optimize
results, please refer to <a class="reference external" href="HRMUserManual.htm#50532397_51687">See Advanced deconvolution in
HRM</a>.</p>
<div class="section" id="create-an-account">
<h3>1. Create an account<a class="headerlink" href="#create-an-account" title="Permalink to this headline">¶</a></h3>
<p><img alt="image4" src="_images/HRMUserManual-2.gif" /></p>
<ul class="simple">
<li>If your imaging facility already has an HRM server, go to the server
and create an account. Names are case sensitive. Contact your system
administrator for activation.</li>
<li>If you don’t have an HRM system running, it is still possible to get
familiar with Huygens by creating an account on the HRM demo
server<a class="reference external" href="#50532361_pgfId-948297">5</a> at SVI, as seen in <a class="reference external" href="HRM/HRM%20Introduction.htm#50532372_48684">See The
registration page for the HRM demo
server.</a></li>
</ul>
<p><img alt="image5" src="_images/HRMUserManual-3.gif" /></p>
</div>
<div class="section" id="upload-a-raw-image">
<h3>2. Upload a raw image<a class="headerlink" href="#upload-a-raw-image" title="Permalink to this headline">¶</a></h3>
<p>Go to <em>raw images</em> and upload a file via the upload icon. Select a file
from your PC. Several files can be uploaded at once.</p>
<p><img alt="image6" src="_images/HRMUserManual-4.gif" /></p>
</div>
<div class="section" id="deconvolve">
<h3>3. Deconvolve<a class="headerlink" href="#deconvolve" title="Permalink to this headline">¶</a></h3>
<p>From the main screen, go to <em>start a job</em> , entering the deconvolution
process.</p>
<p><img alt="image7" src="_images/HRMUserManual-5.gif" /></p>
<p><em>(1/5)</em> <em>Select files.</em> First Select the desired file type, all files of
that format in the deconvolution directory will be listed. Use the up en
down icons to choose which files will be deconvolved. Multiple files can
be selected, if they have the same format. When selecting a file, a
preview can be generated on the right panel when requested. This preview
provides information about your image, including the dimensions,
sampling and the number of channels used.**</p>
<p><img alt="image8" src="_images/HRMUserManual-6.gif" /></p>
<p><em>(2/5)</em> <em>Image parameters</em> . Select a parameter set, this parameter set
contains information about how the image was created. Choosing the
correct parameters is crucial for obtaining good deconvolution results.</p>
<p><em>Use predefined (easy)</em> . There are a number of predefined deconvolution
formats by your administrator. Make sure that the microscope type and
the correct number of channels is selected (visible in the preview on
the previous page). Proceed to the next step.</p>
<p><img alt="image9" src="_images/HRMUserManual-7.gif" /></p>
<p><em>Create your own (harder)</em> . Depending on the file format, some
parameters are already provided by the metadata. HRM will inform whether
usable metadata is present. To use the parameters in the metadata, leave
the field blank. For advanced users it is possible to tune and tweak
their parameters to optimize results, this is explained in <a class="reference external" href="HRMUserManual.htm#50532397_51687">See Advanced
deconvolution in HRM</a>.</p>
<p>First create a new set, by entering a set name and press the new
parameter set icon. Alternatively, it is possible to edit an existing
set.</p>
<p>The new parameter set opens, select the correct number of channels
(visible in the preview in the first step <em>(1/5)</em> ). And select
theoretical PSF.</p>
<p>Next are the optical parameters. You need to know the parameters of your
experiment and enter them, some of these may be included in the metadata
as illustrated in <a class="reference external" href="HRM/HRM%20Introduction.htm#50532372_47906">See The first optical parameters page. Shown is which
parameters must be provided and which may be
0mitted</a>. Note that there
are two pages of optical data. There are several calculators available
to help you enter the correct data. Additionally, it is possible to
calculate the pixel size by dividing the size of the image by the number
of pixels in that dimension, which are both shown in the preview of the
first step <em>(1/5)</em> .</p>
<p><img alt="image10" src="_images/HRMUserManual-8.gif" /></p>
<p>Finally select whether you want to enable depth-dependent correction of
the PSF. NO is default. YES improves the image quality, but also takes
slightly longer to calculate. Here it is additionally necessary to
submit from which side of the image the measurement started.</p>
<p><em>(3/5)</em> <em>Restoration parameters</em> . Choose the parameters that will
communicate with Huygens how the image must be restored.</p>
<p><em>Use predefined (easy).</em> Again a number of predefined sets from your
administrator are available. It is worthwhile however to edit the set
and obtain the appropriate SNR (see next).</p>
<p><em>Create your own (fairly easy).</em> Create or edit a set and enter the
setup.</p>
<ul class="simple">
<li>For deconvolution algorithm choose Classic Maximum Likelihood
Estimation.</li>
</ul>
<p><img alt="image11" src="_images/HRMUserManual-9.gif" /></p>
<ul class="simple">
<li>Now use the SNR calculator. Upon entering an image, the calculator
shows estimated previews of restored images for different SNR, along
with recommendations by the software, as seen in <a class="reference external" href="HRM/HRM%20Introduction.htm#50532372_80119">See The SNR
estimator. Image is courtesy of Anko de Graaff from the Hubrecht
Institute.</a>. Pressing
forward means accepting the recommendations. Note that for each
channel an SNR must be chosen. This SNR is used for the entire set of
images, selected in step <em>(1/5)</em> . If one image has less channels
than submitted, only the first are used. As a guideline, use 20 for
confocal microscopy and 40 for widefield microscopy.</li>
</ul>
<p><img alt="image12" src="_images/HRMUserManual-10.gif" /></p>
<ul class="simple">
<li>Background mode. Choose automatic background estimation.</li>
<li>Stopping criteria. The deconvolution will stop when either of two
criteria are met. 20 iterations and a quality change of 0.05 are good
default values.</li>
<li><em>(4/5)</em> <em>Analysis parameters</em> . This step is only available if you
have a coloc license and if there is more than one channel available
for colocalization. Choose which analysis to perform on the image.
The colocalization<a class="reference external" href="#50532361_pgfId-949465">6</a> analyzer is
already available on HRM and more options and tools will follow.</li>
</ul>
<p><em>Use predefined (easy)</em> . Again there are a number of predefined
options, choose whether you want colocalization or not.</p>
<p><em>Create your own (medium)</em> . Create or edit your own set. First choose
whether you want Huygens to do a colocalization calculation. If you do,
choose for which channels you want colocalization (default all
channels). Next choose your colocalization coefficients, thresholds and
map. As default select all the colocalization coefficients, choose
automatic estimation for the threshold and Pearson for your
colocalization map.</p>
<p><img alt="image13" src="_images/HRMUserManual-11.gif" /></p>
<p><em>(5/5)</em> <em>Launch</em> . Check whether all the configurations are correct and
choose an output format. SVI-HDF5 is well suited for the Huygens
environment and is very good at carrying metadata and compressing file
data. ICS is a good allrounder. To deconvolve press the big green button
at the bottom of the page.</p>
<p><img alt="image14" src="_images/HRMUserManual-12.gif" /></p>
</div>
<div class="section" id="queue">
<h3>4. Queue<a class="headerlink" href="#queue" title="Permalink to this headline">¶</a></h3>
<p>The job is now placed in the queue. HRM has a smart queue, which manages
the jobs of several different users in an intelligent way. Allowing
small jobs to go in between large ones. Here jobs of all users can be
viewed and own jobs can be deleted.</p>
<p><img alt="image15" src="_images/HRMUserManual-13.gif" /></p>
</div>
<div class="section" id="results">
<h3>5. Results<a class="headerlink" href="#results" title="Permalink to this headline">¶</a></h3>
<p>After deconvolution the images are placed in the results folder,
accessible via the main menu. From there, files can be downloaded or
viewed from the server.*
* Click on <em>detailed results</em> in the right window to preview and compare
the deconvolution result with the original image, illustrated in <a class="reference external" href="HRM/HRM%20Introduction.htm#50532372_11946">See
Compare deconvolved results using the MIP renderer. Image courtesy of
Anko de Graaff.</a>.</p>
<p><img alt="image16" src="_images/HRMUserManual-14.gif" /></p>
<p><img alt="image17" src="_images/HRMUserManual-15.gif" /></p>
</div>
<div class="section" id="note">
<h3>Note<a class="headerlink" href="#note" title="Permalink to this headline">¶</a></h3>
<p>To optimize your deconvolution results it is necessary to understand the
different properties of your image and some of the mechanisms behind
deconvolution. If you’ve followed this guide, many properties have been
assigned default values. We would like to encourage the users to read
into and explore different settings, which will help you improve your
deconvolution results. Some more in-depth knowledge is given in chapter
<a class="reference external" href="HRMUserManual.htm#50532397_51687">See Advanced deconvolution in
HRM</a>.</p>
</div>
</div>
<div class="section" id="advanced-deconvolution-in-hrm">
<h2>Advanced deconvolution in HRM<a class="headerlink" href="#advanced-deconvolution-in-hrm" title="Permalink to this headline">¶</a></h2>
<p>This chapter explains in more detail how to create and launch
deconvolution jobs in HRM. Instructions on how to inspect deconvolution
results and how to access statistics in HRM are also included here.</p>
<p>It is recommended to visit an HRM site so that the job launching process
can be reproduced. An HRM account at an imaging facility can be
requested by sending an application to the corresponding administrator.
This task can be performed from within HRM as highlighted in <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_70213">See Login
and registration
page</a>. Upon
clicking on the <em>register</em> link, the user is asked to fill out a short
form that will be forwarded to the administrator.</p>
<p><img alt="image18" src="_images/HRMUserManual-16.gif" /></p>
<p>If the imaging facility of interest does not provide access to an HRM
installation it is still possible to get familiar with HRM by requesting
an account for the HRM demo server<a class="reference external" href="#50532361_pgfId-926247">7</a>at
SVI.</p>
<p>With an HRM account deconvolution jobs can be run remotely, in batch
mode, with just a few clicks.</p>
<p><img alt="image19" src="_images/HRMUserManual-17.gif" /></p>
<p>The starting page</p>
<p>Once logged in HRM, the starting page is displayed, as shown in <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_87999">See The
main menu.</a>. From
this page the user can manage the deconvolution jobs as well as other
HRM administrative tasks. The following shortcuts are available:</p>
<ul class="simple">
<li><em>Start a job</em> : Start a new deconvolution or a batch of
deconvolutions.</li>
<li><em>Queue status</em> : See all jobs, manage owned jobs.</li>
<li><em>Raw images</em> : Upload new data for deconvolution.</li>
<li><em>Results:</em> view and download deconvolved data.</li>
<li><em>Statistics</em> : Summary of job statistics.</li>
<li><em>Accoun</em> t: View and change login data.</li>
</ul>
<p><img alt="image20" src="_images/HRMUserManual-18.gif" /></p>
<p><img alt="image21" src="_images/HRMUserManual-17.gif" /></p>
<p>Raw Images</p>
<p>To upload images for deconvolution, go to the <em>Raw Images</em> section.
Press the <em>upload</em> button as shown in <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_95452">See Raw images section. Files can
be uploaded and deleted
here.</a>. Next, use
the <em>browse</em> button at the bottom of the page to select a file for
upload. Once a file has been added, it is possible to add more files
using the <em>add more files</em> button in red. Additionally it is possible to
add several files at once, by compressing them to an archive and
uploading the archive. Huygens will automatically depackage the archive
and add the embedded files. Note that this will also decrease your
upload time, since the data is compressed.</p>
<p><img alt="image22" src="_images/HRMUserManual-19.gif" /></p>
<p>After all the desired files have been selected, upload them using the
<em>upload</em> icon again. When finished all the files will be added to your
<em>Raw Images</em> directory. This is a personal directory with all the user’s
unprocessed images.</p>
<p><img alt="image23" src="_images/HRMUserManual-20.gif" /></p>
<p><img alt="image24" src="_images/HRMUserManual-17.gif" /></p>
<p>Start a Job</p>
<p>To start a new deconvolution click on the <em>Start a job</em> icon. Starting a
new deconvolution job is split into 5 main steps:</p>
<ol class="arabic simple">
<li>Selection of the raw images.</li>
<li>Image parameters: enter parameters of the image and microscope.</li>
<li>Restoration parameters: determine which parameters to use for
deconvolution.</li>
<li>Analysis parameters: determine which analysis to perform. Only
available when a colocalization license is present.</li>
<li>Launch: overview and selection of the output file format.</li>
</ol>
<p><img alt="image25" src="_images/HRMUserManual-21.gif" /></p>
<p><img alt="image26" src="_images/HRMUserManual-17.gif" /></p>
<p>Select images (1/5)</p>
<p>In the <em>Select Images</em> the user can add images to the deconvolution
list, only one file type (per extension) can be deconvolved per batch,
as illustrated in <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_11971">See Select images page. Only files of the selected
format are displayed, on the right is a preview of the selected image.
Image is with courtesy of Drs. Jeff Tucker,
NIEHS.</a>. Select
the desired file format and use the up and down arrows to select the
images for batch deconvolution. Several images can be selected at once
to do batch processing. Keep in mind that these images must share the
same microscopic parameters in order to obtain good deconvolution
results. This is generally true if the images are recorded with the same
setup.</p>
<p><img alt="image27" src="_images/HRMUserManual-22.gif" /></p>
<p>When an image is selected a preview is displayed on the right panel
whenever possible. The user can click on <em>Click to generate preview</em> to
see a thumbnail of the image.</p>
<p><img alt="image28" src="_images/HRMUserManual-23.gif" /></p>
<div class="section" id="image-format">
<h3><em>Image format</em><a class="headerlink" href="#image-format" title="Permalink to this headline">¶</a></h3>
<p>The format of the image file is directly linked to the acquisition
system of the microscope (LEICA, ZEISS, Tiff series, etc).</p>
<p>Both HRM and the underlying engine, Huygens Core, use naming standards
such as the LEICA standard. When handling exotic tiff file names, such
as the tiff exports from PerkinElmer UltraView, it is recommended to
rename the files before proceeding with the deconvolution jobs. There
are freeware tools available to systematically change names of large
file groups<a class="reference external" href="#50532361_pgfId-989314">8</a>.</p>
<p>A few examples of different tiff standards include:</p>
<ul class="simple">
<li><em>Olympus FluoView</em> (*.tiff): This is a particular tiff format (FM
multi-layer) that can store multiple 2D planes in a 3D stack (single
file).</li>
<li><em>Leica series</em> (*.tiff): Series of 2D images, with Leica Standard
naming. Below, two examples of this standard:</li>
<li>XYZ-time, single channel: name_t00_z000.tif.</li>
<li>XYZ-time, multiple channels: name_t00_z000_ch00.tif.</li>
<li><em>Generic Tiff</em> (*.tiff): Sequentially numbered series of 2D tiff
images. Upload a single 2D image. When the <em>automatically load file
series if supported</em> box is checked, all files from the series will
be uploaded creating a 3D (time) series.</li>
</ul>
<p>When all the files are selected, click on the <em>big right arrow</em> at the
bottom of the page to continue to the image parameter step.</p>
<p><img alt="image29" src="_images/HRMUserManual-24.gif" /></p>
<p><img alt="image30" src="_images/HRMUserManual-17.gif" /></p>
<p>The Image Parameters (2/5)</p>
<p>In <em>Start a job - Image Parameters</em> the image parameters can be
specified and saved. The image parameters are grouped in sets, which
describe the microscope and the conditions used to acquire the images. A
parameter set can be reused in future deconvolution jobs. This will make
sense as long as the involved images have been acquired under the
conditions specified in the parameter set.</p>
<p>The <em>Start a job - Image Parameters</em> page shows 3 main areas (see <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_15842">See
Image parameters, main
page.</a>):</p>
<ul class="simple">
<li><em>Template Image Parameters (1)</em> : parameter sets created by the HRM
administrator. These can be used as references. They can be copied
and changed by the HRM users.</li>
<li><em>Your Image Parameters (2)</em> : The user’s parameter sets. These may be
based on administrator templates or created by the user with
customized values.</li>
</ul>
<p><img alt="image31" src="_images/HRMUserManual-25.gif" /></p>
<ul class="simple">
<li><em>New/Clone Parameter Set Name (3)</em> : Entry field for the name of a
new parameter set. Type a name for the new set and click on the <em>add</em>
button. A new set of parameters will be created. It is advised to
write clear, easy-to-understand names for the parameter sets.</li>
</ul>
<p><img alt="image32" src="_images/HRMUserManual-26.gif" /></p>
<p>In order to handle (create, delete, edit etc.) sets, there are icons at
the bottom of the page. Each with a tooltip, stating it’s function.</p>
<p>A set of parameters consists of a number of relevant microscopic
parameters. These provide Huygens Core with information about the images
that will be deconvolved. The microscopic parameters of a particular set
can be seen in the preview on the right or by editing it.</p>
<p>When a set is edited its parameters are displayed with links to the
SVI-wiki where explanations are provided. These links are represented by
question mark icons throughout HRM.</p>
<p><img alt="image33" src="_images/HRMUserManual-27.gif" /></p>
</div>
<div class="section" id="import-metadata">
<h3>Import metadata<a class="headerlink" href="#import-metadata" title="Permalink to this headline">¶</a></h3>
<p>Most microscopy file formats allow for saving metadata. If the
acquisition system works with such file formats it can save parameters
such as the sampling sizes, pinhole sizes, numerical aperture, etc, in
the raw data. In HRM the user can choose whether this information (image
metadata) should be used in the deconvolution job. Some file formats,
though, lack the structure to save all the relevant information of a
parameter, e.g. physical units. For this reason, HRM informs, per file
type, how reliably the metadata can be used (see <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_35175">See Metadata warnings.
When trusted metadata is present, HRM will inform on this, leave blank
to adopt metadata
values.</a>). Leave
fields blank to accept the metadata. HRM assists the user in this
regard, showing messages on which parameters may be skipped and which
must be provided. Notice that entering the image parameters for a
deconvolution job in HRM can be skipped almost entirely if the images
contain good, complete, reliable metadata, while the deconvolution
results will be optimal.</p>
<p><img alt="image34" src="_images/HRMUserManual-28.gif" /></p>
<p><img alt="image35" src="_images/HRMUserManual-29.gif" /></p>
<p>At the end of the deconvolution job, the user may get a notification
email and a link to the restored image, a summary table can be viewed
listing which parameters were taken from the metadata, as well as their
values (see <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_70726">See Parameters used during deconvolution. Parameters
retrieved from the image metadata are also
shown.</a>).</p>
<p><img alt="image36" src="_images/HRMUserManual-30.gif" /></p>
<p>When entering the image parameters, the following properties are
relevant (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_95452">See Raw images section. Files can be uploaded and deleted
here.</a>):</p>
</div>
<div class="section" id="number-of-channels">
<h3><em>Number of channels</em><a class="headerlink" href="#number-of-channels" title="Permalink to this headline">¶</a></h3>
<p>Number of “fluorescent” channels in the image. Note that no transmission
channels can be deconvolved!</p>
</div>
<div class="section" id="psf">
<h3><em>PSF</em><a class="headerlink" href="#psf" title="Permalink to this headline">¶</a></h3>
<p>The deconvolution needs a Point Spread Function (PSF) to restore the raw
data. The Huygens software can compute a theoretical PSF from the
parameters of the raw data or it can use a measured PSF. In the latter
case, HRM asks for a file containing the measured PSF. In most cases the
theoretical PSF works fine.</p>
<p><img alt="image37" src="_images/HRMUserManual-31.gif" /></p>
<p>There are a few more questions concerning the optical parameters of the
microscope. <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_62198">See (a) First optical parameters page. Only the microscope
type must be provided. (b) Second optical parameters page. Some settings
are only applicable for some
microscopes.</a>
shows a screenshot of these questions in HRM.</p>
<p><img alt="image38" src="_images/HRMUserManual-32.gif" /></p>
<ul class="simple">
<li><em>Microscope type:</em> whether a Spinning disk confocal, Single point
confocal, Widefield or Multiphoton system was used as microscope to
take the image.</li>
<li><em>Numerical aperture</em> : The numerical aperture describes the amount of
light coming from the focus that the objective can collect. It
depends on the half angle of the maximum cone of light that can enter
or exit the lens. It is directly linked to the resolution of the
objective. The numerical aperture is displayed on the objective,
right next to the magnification.</li>
<li><em>Wavelengths</em> : Excitation and emission wavelengths of each channel.
For the emission wavelength the central value of the emission
spectrum of the fluorophore can be considered. Make sure to insert
these values in the same order as they were acquired.</li>
<li><em>Objective type</em> : Dry or immersion objective (oil, water, glycerol,
air).</li>
<li><em>Sample medium</em> : The refractive index of the medium in which the
sample was embedded (glycerol, polyvinyl alcohol, vectashield or
other media).</li>
<li><em>Voxel size</em> : The voxel size is a very important parameter for the
deconvolution of microscopic images. According to the Nyquist
criterion<a class="reference external" href="#50532361_pgfId-982893">9</a> its value should not be
larger than half the optical resolution of the imaging system. In
order to set the voxel size appropriately three different cases can
be distinguished depending on the microscope type.</li>
<li><em>Voxel size, widefield and spinning disk microscopy</em> : On widefield
images, the <em>xy</em> pixel size depends on the physical size of the CCD
camera element, the objective magnification, the binning, and the
possible magnification factors introduced by the microscope tube and
the c-mount. In the frequent case in which the tube factor and the
c-mount factor are equal to 1, the <em>xy</em> pixel size is given by:</li>
</ul>
<p><img alt="image39" src="_images/HRMUserManual-33.gif" /></p>
<p>If a pixel binning is used, it is necessary to take this into account to
calculate the pixel size. HRM gives access to a calculator to compute
the <em>xy</em> pixel size (see “Calculate from CCD pixel size” at the image
parameters page). HRM also shows the ideal voxel size for the given
optical parameters (numerical aperture, refractive indexes, etc) so that
it can be used as a reference. Make sure to set a voxel size consistent
with the optical resolution of the microscope as undersampled images
will often show artifacts after deconvolution. Notice that the z-step
value can often be found in the metadata of the image.</p>
<ul class="simple">
<li><em>Voxel size, confocal and 2-photon microscopy</em> : When using batch
processing, the parameters for all images need to be the same. In
case of confocal and widefield microscopy, the voxel size is affected
by the zooming factor and the frame size for a given objective.</li>
<li><em>Backprojected pinhole radius (for confocal and 2-photon microscopy,
shown in `See (a) First optical parameters page. Only the microscope
type must be provided. (b) Second optical parameters page. Some
settings are only applicable for some
microscopes. &lt;HRM/HRM%20Deconvolution%20Jobs.htm#50532397_62198&gt;`__)</em>
: In confocal images the “backprojected pinhole radius” is the radius
of the pinhole as it would be seen on the focal plane. This number
can be calculated in HRM by clicking on the “Backprojected pinhole
calculator” link. The calculator will ask for the objective
magnification and the actual pinhole radius for the computation of
the backprojected radius.</li>
<li><em>Backprojected pinhole spacing and radius (for</em> <em>Spinning disk
microscopy)</em> :</li>
</ul>
<p>HRM also counts on a calculator to compute the backprojected value of
the pinhole spacing for spinning disk microscopy (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_29035">See Select files
to measure PSF from. Active when a measured PSF is
chosen</a>). This
calculator lists a number of microscope models to assist the user in the
calculation. If, for example, a Yokogawa disk is selected from the list,
the pinhole radius is set to 250 nm and the pinhole spacing is set to
2.53 μm. From these values, combined with the magnification, HRM
computes the backprojected counterparts (as they would be seen on the
focal plane).</p>
<p><img alt="image40" src="_images/HRMUserManual-34.gif" /></p>
</div>
<div class="section" id="point-spread-function">
<h3><em>Point Spread Function</em><a class="headerlink" href="#point-spread-function" title="Permalink to this headline">¶</a></h3>
<p>As the Point Spread Function (PSF) is the basic “brick” of which the
images are “made”, one should record details at least on the scale of
the PSF to gather all the available information. Failing at that may
spoil any attempt to do deconvolution, because deconvolution works on
the PSF scale. If a voxel is much larger than the PSF, the deconvolution
simply cannot be done, then there are many PSF’s recorded in one voxel
and it becomes impossible to distinguish between those. In HRM, one can
choose to have Huygens Core calculate a theoretical PSF compatible with
the raw image or one can upload the measured (distilled) PSF that most
resembles the real PSF of the imaging system. In practice the
theoretical PSF computed from the image parameters can significantly
differ from the experimental (distilled) PSF, because of unavoidable
little misalignments and imperfections in the microscope system. Usually
a measured PSF is larger and more asymmetric than a theoretical one. The
use of a measured PSF can thus improve the deconvolution results.</p>
<ul class="simple">
<li><em>Distilled PSF file selection</em> : A measured PSF can be derived from
images of fluorescent beads, for example using the SVI Huygens PSF
Distiller. However a good PSF is relatively complicated to measure,
as one needs to acquire multiple images for each wavelength.
Additionally the measurement must be done with the exact same
conditions as the images for which the PSF is intended (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_82680">See
spherical aberration correction. Schematic guideline to spherical
aberration correction
methods.</a>). HRM
will ask to select one PSF file per channel if a measured PSF option
is chosen. When selecting a file, those files that don’t suit the
current image parameters are highlighted in red to stress that they
are not good PSF candidates.</li>
</ul>
<p><img alt="image41" src="_images/HRMUserManual-35.gif" /></p>
<ul class="simple">
<li><em>Theoretical PSF, spherical aberration correction</em> : if necessary HRM
will ask whether to correct the theoretical PSF for spherical
aberration (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_57129">See Spherical aberration correction. Specify which
correction to
use.</a>). In
general, better deconvolution results are achieved if the spherical
aberration correction is applied. A few more parameters are necessary
for the spherical aberration correction. <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_82680">See spherical aberration
correction. Schematic guideline to spherical aberration correction
methods.</a> shows
a schematic guideline to the different methods of correction. Note
that these are only guidelines and the applicability of each method
differs per case.</li>
<li><em>Specify sample orientation</em> : Specify the position of the coverslip
with respect to the dataset (<em>Plane 0 is CLOSEST / FARTHEST from the
coverslip</em> ).</li>
<li><em>Correction mode</em> : Due to the spherical aberration the PSF size and
shape changes with the sample depth. To correct for this effect
Huygens Core will generate a “dynamic” PSF adapted to the different
positions<a class="reference external" href="#50532361_pgfId-994959">10</a>. Use the Spherical
Aberration correction only if there is a significant mismatch between
the refractive indexes of the objective and of the sample medium, as
the processing is significantly more time-consuming.</li>
</ul>
<p><img alt="image42" src="_images/HRMUserManual-37.gif" /></p>
<ol class="arabic simple">
<li><em>Deconvolution with PSF generated at user-defined depth (advanced)</em> :
A unique PSF will be used, but calculated at a sample depth defined
by the user. The main idea is to use a “mean” PSF to partially
correct for spherical aberration. Useful when a user is interested in
an object at a specific depth.</li>
<li><em>Perform automatic correction</em> : In this case the stack will be
divided into a certain number of bricks. Each brick will be
deconvolved with a PSF adapted to the depth, considering the mismatch
of refractive indexes between the sample medium and the objective
medium.</li>
<li><em>Depth-dependent correction on few bricks (advanced)</em> : The number of
bricks into which the stack will be divided for the deconvolution is
limited. The deconvolution will be faster than in the case “Perform
automatic correction”.</li>
<li><em>Depth-dependant correction performed slice by slice (advanced):</em> A
new PSF is calculated for each slice.</li>
</ol>
<p>At this point, the parameter set is ready and can be saved. The list of
all the user’s parameter sets will be shown.</p>
<p>Select one parameter set for the deconvolution job and click on the big
<em>right arrow</em> to continue (see <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_15842">See Image parameters, main
page.</a>).</p>
<p><img alt="image43" src="_images/HRMUserManual-38.gif" /></p>
<p><img alt="image44" src="_images/HRMUserManual-17.gif" /></p>
<p>The Restoration Parameters (3/5)</p>
<p>A set of restoration parameters instructs Huygens Core how to restore
your image. Some of these parameters are used before deconvolution, the
background correction, for example, subtracts a background value from
the image before deconvolution. Most options refer to the deconvolution
itself, for example the Signal to Noise Ratio (SNR), the number of
iterations (stopping criterium) or the convergence quality to a solution
(stopping criterium).</p>
<p>The background and the SNR are both linked to different important
acquisition parameters, changing these in the experimental setup will
most likely change the SNR and background of the recorded image,
requiring them to be reset in the restoration parameters set.</p>
<p><img alt="image45" src="_images/HRMUserManual-39.gif" /></p>
<ul class="simple">
<li>Gain / offset</li>
<li>Time exposure / scanning velocity</li>
<li>Summing / averaging</li>
<li>Laser power</li>
<li>Spectral detection range</li>
</ul>
<p><img alt="image46" src="_images/HRMUserManual-40.gif" /></p>
<p>The initial page of the Restoration Parameters (see <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_15031">See Restoration
Parameter Step. At the end of this step a restoration parameter is
selected. On the right a summary of the selected set is
displayed.</a>)
resembles the Image Parameters page (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_15842">See Image parameters, main
page.</a>). Thus,
templates made by the HRM administrator can be selected, copied, and
edited for customization. New parameter sets can also be created from
scratch.</p>
<p><img alt="image47" src="_images/HRMUserManual-41.gif" /></p>
<p>A Restoration Parameter set includes the following parameters (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_53130">See
Restoration Parameter set: Deconvolution algorithm, SNR estimation,
background mode and stopping
criteria.</a>):</p>
<p><img alt="image48" src="_images/HRMUserManual-42.gif" /></p>
</div>
<div class="section" id="deconvolution-algorithm">
<h3><em>Deconvolution algorithm</em><a class="headerlink" href="#deconvolution-algorithm" title="Permalink to this headline">¶</a></h3>
<p>Two deconvolution algorithms are available to process the data. The
Classic Maximum Likelihood Estimation (CMLE) algorithm and the Quick
Maximum Likelihood Estimation (QMLE) (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_53130">See Restoration Parameter
set: Deconvolution algorithm, SNR estimation, background mode and
stopping
criteria.</a>).</p>
<p>The “Classic” algorithm should be used in most circumstances. The
“Quick” algorithm is faster, but gives less precise solutions in some
cases. One may consider using the “Quick” algorithm in compute-intensive
situations, for example, when deconvolving 3D-time series.</p>
</div>
<div class="section" id="signal-to-noise-ratio-estimation">
<h3><em>Signal to Noise ratio estimation</em><a class="headerlink" href="#signal-to-noise-ratio-estimation" title="Permalink to this headline">¶</a></h3>
<p>Noise are random fluctuations in the intensity of your image. The
deconvolution process may in general increase the noise of the original
images, as it restores the high frequencies. For this reason Huygens
will correct for noise during the deconvolution process. The SNR
parameter defines the degree of noise correction that will be performed
and should be a measure of the noise of the original image. The user can
assess which SNR value is best or let HRM estimate it automatically.</p>
<p>For an automatic estimation click on <em>Estimate SNR from image</em> . Then,
select an image (see <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_68128">See Select a method and image to estimate SNR. A
preview is shown on the right. Image courtesy of Drs. Jeff
Tucker.</a>) and
click on the <em>calculate</em> button, the SNR will be estimated for each
channel of the selected image.</p>
<p><img alt="image49" src="_images/HRMUserManual-43.gif" /></p>
<p>The SNR estimation will be shown along with four noise simulations with
different SNR values. The noise simulations serve to confirm visually
the correctness of the automatic SNR estimation. Move the mouse pointer
over the different images to see them zoomed in.</p>
<p><img alt="image50" src="_images/HRMUserManual-44.gif" /></p>
<p>All images deconvolved with the same restoration parameter set should
have similar Signal to Noise Ratios. This will be the case if the images
have been taken with the same Gain, Offset, laser power and image
averaging for confocal imaging and the same Gain and time exposure for
widefield imaging. Each time these microscope settings are changed or a
different preparation is used the Signal to Noise Ratio should be
re-estimated.</p>
<p>The SNR is a delicate parameter as it can highly influence the
deconvolution result. On the one hand, if the deconvolution result looks
too smooth and details are missing, a higher SNR value can be used. On
the other hand, if the result looks too grainy one can try to use a
lower SNR value.</p>
<p>Since HRM 2.0.0 there exists a new Beta SNR estimator that aims at
improving the accuracy of the classic SNR estimator. Both tools are
currently available to estimate the SNR, though the Beta SNR estimator
is being tested and improved. Its estimations in Widefield images and
Confocal images free of baseline (black level) may already be accurate.
The Beta SNR estimator may not yet find accurate results in confocal
images that have a baseline or images that show strong clipping on the
lower side of the intensity range.</p>
</div>
<div class="section" id="background-mode">
<h3><em>Background mode</em><a class="headerlink" href="#background-mode" title="Permalink to this headline">¶</a></h3>
<p>The background is a more or less constant value, which is added to the
image. Three options are available for the background correction. They
return slightly different values so this choice can affect the
deconvolution result:</p>
<ul class="simple">
<li><em>Automatic background estimation</em> : This estimation usually works
fine. A region with a low mean value is found and the background
computed there.</li>
<li><em>In/near object</em> : Huygens estimates the background around intensity
peaks. This option can be interesting, for example, when having
bright little objects in a cell with a strong cytoplasmic background.</li>
<li><em>Remove constant absolute value</em> : To make sure that the same
background level is removed from all the images in the batch, insert
manually a measured mean background for each channel. This option is
typically useful for those interested in doing fluorescence
quantification or stitching.</li>
</ul>
</div>
<div class="section" id="stopping-criteria">
<h3><em>Stopping criteria</em><a class="headerlink" href="#stopping-criteria" title="Permalink to this headline">¶</a></h3>
<p>The Maximum Likelihood Estimation (MLE) algorithm is an iterative
method. This means that the algorithm computes sequential solutions
which converge to a stable deconvolution result. Deconvolution will stop
when either of the following two conditions is met.</p>
<ul class="simple">
<li><em>Number of iterations</em> : sets the maximum number of iterations that
Huygens will compute.</li>
<li><em>Quality change</em> : how much the results of two consecutive iterations
differ. If two subsequent results differ less than the Quality Change
the convergence has been reached.</li>
</ul>
<p>The Restoration Parameter set is now ready. Upon saving it HRM will show
the list of available restoration parameter sets. Choose one and click
on the big <em>right arrow</em> to continue to the next step (see <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_53130">See
Restoration Parameter set: Deconvolution algorithm, SNR estimation,
background mode and stopping
criteria.</a>).</p>
<p><img alt="image51" src="_images/HRMUserManual-45.gif" /></p>
<p>The image, restoration and analysis parameter sets can be reused to
launch other deconvolution jobs with the same microscopic and processing
properties.</p>
<p><img alt="image52" src="_images/HRMUserManual-46.gif" /></p>
<p><img alt="image53" src="_images/HRMUserManual-17.gif" /></p>
<p>Analysis parameters (4/5)</p>
<p>After deconvolution the restored image can be analyzed. There are
several tools available for doing so in Huygens. Currently HRM already
supports the colocalization analyzer, and more tools will be added soon.</p>
<p>As in previous parameter steps, there are a number of template analysis
parameters, while it is still possible to edit or create new sets. When
selected, details of a set are shown in the right panel. The settings
window is shown in <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_22923">See Set colocalization settings. The values shown in
the figure are generally suitable for default
values,..</a> and
consists of:</p>
<p><img alt="image54" src="_images/HRMUserManual-47.gif" /></p>
<p><img alt="image55" src="_images/HRMUserManual-48.gif" /></p>
</div>
<div class="section" id="colocalization-yes-or-no">
<h3>Colocalization (yes or no)<a class="headerlink" href="#colocalization-yes-or-no" title="Permalink to this headline">¶</a></h3>
<p>First step is to decide whether or not to do colocalization analysis.
Colocalization is a tool which measures the amount of overlap between
two channels, therefore it can only be performed if the image has two
channels or more.</p>
</div>
<div class="section" id="channels">
<h3>Channels<a class="headerlink" href="#channels" title="Permalink to this headline">¶</a></h3>
<p>Colocalization can be performed on any two combination of selected
channels. All combinations of the selected channels will be calculated.</p>
</div>
<div class="section" id="colocalization-coefficients">
<h3>Colocalization coefficients<a class="headerlink" href="#colocalization-coefficients" title="Permalink to this headline">¶</a></h3>
<p>Different calculation coefficients are used to characterize the amount
of overlap between two channels. There exist many colocalization
coefficients, in the Huygens software those coefficients are
implemented, which are most commonly used in fluorescent microscopy.</p>
</div>
<div class="section" id="threshold">
<h3>Threshold<a class="headerlink" href="#threshold" title="Permalink to this headline">¶</a></h3>
<p>Before colocalization a threshold can be set, under which no
colocalization will be measured. Doing so will prevent measuring the
overlap between unwanted background noise. HRM includes an automatic
estimation option, which often works very good. Depending on the desired
result and the image, a threshold can be set for each channel. For
example, if there is cross-talk between channels, setting a threshold
can eliminate colocalization between cross-talk signal.</p>
</div>
<div class="section" id="colocalization-map">
<h3>Colocalization map<a class="headerlink" href="#colocalization-map" title="Permalink to this headline">¶</a></h3>
<p>While a colocalization coefficient gives one number for the entire
image, a colocalization map calculates the colocalization for each
voxel. Thus, when put together, they form a 3D image. Again, it is
possible to use different types of colocalization coefficients.</p>
<p>When done editing, select the preferred analysis map and use the <em>right
arrow</em> at the bottom to continue.</p>
<p><img alt="image56" src="_images/HRMUserManual-49.gif" /></p>
<p><img alt="image57" src="_images/HRMUserManual-17.gif" /></p>
<p>Launch the job (5/5)</p>
<p>In this last step several tables are shown listing the images and
settings for the batch deconvolution.</p>
<p>The format of the output images can be selected here. As a guide one can
stick to the following rules. For 3D analysis the “ICS format” is
appropriate, or even the most recent “ICS2”, which is a multichannel,
32-bit format that stores all the deconvolution information while it
preserves all important details. For 2D imaging, when analysis is
required, the TIFF-8bit can be used for output. This format is fine for
analysis such as counting or for segmentation, but not for
quantification. For 2D quantification 16-bit or 32-bit formats are
recommended. For 3D visualization with Huygens ICS, ICS2 or HDF5 are
most appropriate.</p>
<p><img alt="image58" src="_images/HRMUserManual-50.gif" /></p>
<p>To change the images or the settings of the Batch Deconvolution click on
the corresponding links: <em>Image Parameters</em> , <em>Processing Parameters</em> ,
<em>Analysis Parameters</em> <em>and</em> <em>Selected Images</em> .</p>
<p>To launch the deconvolution click on the <em>big green button</em> at the
bottom of the page (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_52511">See Launch. Select the output file format and
launch.</a>). HRM
will create one job per image and put it in the job queue.</p>
<p><img alt="image59" src="_images/HRMUserManual-51.gif" /></p>
<p>After launching the jobs HRM shows the main panel. Click on the <em>Queue
Status</em> icon to examine the jobs status or to delete them if they are no
longer needed.</p>
<p><img alt="image60" src="_images/HRMUserManual-17.gif" /></p>
<p>The Queue status</p>
<p>HRM manages the deconvolution of multiple jobs owned by different users
through a queue. When clicking on the “<em>Queue status</em> ” button all the
waiting jobs are listed. The job currently processed is marked in green
(See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_10833">See The queue. Jobs marked in green are currently being
processed.</a>).</p>
<p><img alt="image61" src="_images/HRMUserManual-52.gif" /></p>
<p><img alt="image62" src="_images/HRMUserManual-53.gif" /></p>
<p>To monitor the owned jobs and optionally delete them, select the
corresponding lines from the queue and click on the “<em>trash bin</em> ”
button.</p>
<p>When enabled by the administrator, HRM will send a notification email
after the deconvolution job is finished. If an error occurs the user
will also get a notification. In that case please contact the system
administrator.</p>
<p>If something seems wrong, try to verify if there is a mistake in the
settings. Try to contact the system administrator otherwise.</p>
<p>Notice that because HRM can be installed on a combination of dedicated
servers the deconvolution process is usually performed with a good
computation speed.</p>
<p><img alt="image63" src="_images/HRMUserManual-17.gif" /></p>
<p>Results</p>
<p>After deconvolution has finished, the files are placed in the <em>results</em>
<em>folder</em> , accessible via the main menu. From here, results can be
viewed and edited or downloaded directly. There is a preview available
on the right panel. Additionally, HRM comes with a analysis tools to
compare the deconvolved result with the original data, accessible
via** <em>Go to detailed results</em> button on the right panel.</p>
<p>The tools available, depending on the features of the image, are an
MIP<a class="reference external" href="#50532361_pgfId-956703">11</a> (Maximum Intensity Projection), an
SFP<a class="reference external" href="#50532361_pgfId-956727">12</a>(Simulated Fluorescence Process),
a Slicer and a Stack movie which can all be downloaded by the user. With
these tools it can be examined online whether the deconvolution result
is satisfactory.</p>
<p><img alt="image64" src="_images/HRMUserManual-54.gif" /></p>
<p>Let us take a closer look at the image comparison tools. Upon entering
the user is given an <em>MIP</em> view, which shows only the voxels which have
an intensity higher than a certain value. Via the left menu, several
other tools are available. <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_54123">See MIP comparison tool. A Maximum Intensity
Profile view, compare the original (left) to the deconvolved image
(right). Image courtesy of Drs. Jeff
Tucker.</a> shows a
typical MIP result, comparing the original image with the deconvolved
data set.</p>
<p><img alt="image65" src="_images/HRMUserManual-55.gif" /></p>
<p>The original raw data and deconvolved image can also be compared as
<em>SFP</em> rendered images (see <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_55164">See SFP comparison tool. An SFP, simulated
Fluorescence Process, a tool to compare the original (left) with the
restored image (right). Image courtesy of Jeff
Tucker.</a>).
Basically, an SFP renders the shadow profile of your object on a
homogeneous plate. If there is an area with a high absorption
coefficient in the image, this area may absorb all the excitation light
and cast a shadow over other parts of the object, making them difficult
to image. .</p>
<p><img alt="image66" src="_images/HRMUserManual-56.gif" /></p>
<p>The <em>Slicer</em> allows the user to compare the original image and the
deconvolved data set slice by slice along the z coordinate at any depth
(See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_13076">See Slicer tool. A slicer tool for 3D images, which allows the
user to compare individual z-slices. Image courtesy of Anko de
Graaff.</a>).</p>
<p><img alt="image67" src="_images/HRMUserManual-57.gif" /></p>
<p>The colocalization tool allows the user to do colocalization analysis of
the image. There are several options and coefficients available, which
have been selected during the analysis parameters stage of the launching
procedure. It is important to understand what these coefficients do in
order to interpret them. Full information and details about different
colocalization coefficients can be found on the
website<a class="reference external" href="#50532361_pgfId-993687">13</a>
<a class="reference external" href="#50532361_pgfId-993706">14</a>.</p>
<p>Upon opening the colocalization analyzer, the coefficients page is
displayed. Here the different coefficients for each two channels are
shown, as well as a 2D colocalization
histogram<a class="reference external" href="#50532361_pgfId-993732">15</a>, as shown in <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_38805">See
Colocalization coefficients and histogram. No clear colocalization is
found. Note that other channel sets have been omitted. Image from Jeff
Tucker.</a>.</p>
<p><img alt="image68" src="_images/HRMUserManual-58.gif" /></p>
<p>The colocalization map page can be accessed using <em>Coloc Maps</em> in the
top menu. A colocalization map will be shown for each set of channels
for the parameter the user selected. On the left the two deconvolved
source channels are shown, while on the right the colocalization results
can be viewed.</p>
<p><img alt="image69" src="_images/HRMUserManual-59.gif" /></p>
<p>Note that there are two Manders coefficients and each channel (Red and
Green) in the right image shows a Manders coefficient (M1 and M2), as
seen in <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_23965">See Colocalization map. On the left the two deconvolved
channels are shown, on the right the colocalization map for the two
Manders coefficients. Image from Jeff Tucker. Note that other channel
sets have been
omitted.</a>. Other
coefficients are singular and show only one channel.</p>
<p>There are several download options available to the user. Not all
options are available for all images, depending on whether the image has
a z- or time dimension.</p>
<ul class="simple">
<li><em>Z-stack movie:</em> Use the <em>stack movie</em> button to download a .avi
file, which plays the z-slices in consecutive order.</li>
<li><em>MIP time movie:</em> Use the <em>series movie</em> to download a .avi file,
which plays the MIP projection of your file in time.</li>
<li><em>SFP time movie:</em> Use the <em>series SFP movie</em> to download a .avi file,
which plays the SFP projection of your image in time.</li>
<li><em>download deconvolved data:</em> Use the <em>download icon</em> to download the
deconvolved data, this includes all accessory files.</li>
</ul>
<p><img alt="image70" src="_images/HRMUserManual-17.gif" /></p>
<p>Statistics</p>
<p>The user statistics can be reached from the HRM starting page (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_87999">See
The main menu.</a>).
This turns out to be a straightforward and useful way for anyone to
quickly see how he or she is using HRM and what the image and
restoration trends are.</p>
<p>Clicking on <em>Your Statistics</em> brings the user to a page that summarizes
and shows statistical information about the deconvolution jobs. This
page collects and displays data about the percentages of output formats
used, the percentages of input formats, the type of Point Spread
Function, the image geometry, the microscope type, and the time used for
the user’s deconvolution jobs.</p>
<p>All of this can be split according to the initial and final dates
selected by the user to compute the statistics (See <a class="reference external" href="HRM/HRM%20Deconvolution%20Jobs.htm#50532397_27947">See Your statistics
in HRM. A straightforward way to check how HRM is being used and what
image and restoration trends there are in the deconvolution
jobs.</a>).</p>
<p><img alt="image71" src="_images/HRMUserManual-60.gif" /></p>
<p><img alt="image72" src="_images/HRMUserManual-61.gif" /></p>
<p><img alt="image73" src="_images/HRMUserManual-17.gif" /></p>
<p>Your account</p>
<p>Personal details are visible on the <em>Your Account</em> page, accessible via
the main page. From here, it is possible to change your password and set
your e-mail address.</p>
<p><img alt="image74" src="_images/HRMUserManual-17.gif" /></p>
<p>Tips &amp; Tricks</p>
<ul class="simple">
<li>When doing deconvolution jobs for a batch, up to as many channels as
configured for will be deconvolved.</li>
</ul>
<p><em>For example</em> : a user wants to deconvolve three images with one, three
and four channels respectively. He may specify three channels in the
<em>Image Parameter</em> settings. Then, the first and second image will be
fully deconvolved, while for the last image, only the first three
channels are deconvolved. Additionally, for the first image, only the
parameters for the first channel are used.</p>
</div>
</div>
<div class="section" id="administrators-guide">
<h2>Administrator’s guide<a class="headerlink" href="#administrators-guide" title="Permalink to this headline">¶</a></h2>
<p>Much information about the administration and maintenance is available
online on the HRM project server<a class="reference external" href="#50532361_pgfId-923770">16</a>.
Throughout this chapter some understanding of PHP is assumed.</p>
<p><img alt="image75" src="_images/HRMUserManual-62.gif" /></p>
<p>Installation</p>
<p>To install an HRM web-server several steps are required. There is a full
and extended installation guide available on the project’s
website<a class="reference external" href="#50532361_pgfId-919793">17</a>. Keep in mind that there are a
number of pre-requisites, also described on the website. Below the main
requisites are listed.</p>
<ul class="simple">
<li><em>Operating system:</em> Any recent linux distribution and Mac OS X 10.5
(Leopard) and 10.6 (Snow Leopard) and 10.7 (Lion, though testing has
so far been limited).</li>
<li><em>Huygens Core:</em> HRM is just an interface and needs Huygens Core to do
the calculations. Note that Huygens Core needs a license.</li>
<li><em>Apache2 web server.</em></li>
<li>PHP version 5.2+: Both the queue manager and the web interface are
written in PHP and need PHP to operate.</li>
<li><em>MySQL or PostgreSQL:</em> A relational database management system is
required.</li>
</ul>
<p><img alt="image76" src="_images/HRMUserManual-62.gif" /></p>
<p>Administrator’s options</p>
<p>There are a number of extra options available to the administrator, most
are self explanatory and will not be mentioned here. Some require
highlighting.</p>
<div class="section" id="create-global-templates">
<h3>Create global templates<a class="headerlink" href="#create-global-templates" title="Permalink to this headline">¶</a></h3>
<p>The administrator can set global templates, which are accessible for all
users to use. This is useful to create a low threshold for beginning
users to start deconvolving their raw data. Additionally the
administrator may create a template for each setup present in the
facility. The templates hold the same properties as the users template.
Raw Images can be uploaded, so that the SNR estimator can be used when
creating a restoration template. The administrator can manage <em>Image
templates</em> (<a class="reference external" href="HRMUserManual.htm#50532397_23332">See The Image Parameters
(2/5)</a>), <em>Restoration templates</em>
(<a class="reference external" href="HRMUserManual.htm#50532397_72620">See The Restoration Parameters
(3/5)</a>) and <em>Analysis templates</em>
(<a class="reference external" href="HRMUserManual.htm#50532397_74065">See Analysis parameters (4/5)</a>).</p>
<p><img alt="image77" src="_images/HRMUserManual-63.gif" /></p>
</div>
<div class="section" id="version-upgrade">
<h3>Version upgrade<a class="headerlink" href="#version-upgrade" title="Permalink to this headline">¶</a></h3>
<p>To upgrade to a new version of HRM, download the latest version from
SourceForge<a class="reference external" href="#50532361_pgfId-920135">18</a>. Next, replace the old
version of HRM on your Apache web server with the new version you just
downloaded. For Linux use:</p>
<p><em>cp -r /path/to/newHRM /path/to/oldHRM</em></p>
<p>That’s it! The configuration file is created during installation and not
included in new versions, so the configuration file from the old version
will be conserved. When upgrading from old versions of HRM, please refer
to the project website<a class="reference external" href="#50532361_pgfId-920250">19</a> for extra
information.</p>
</div>
<div class="section" id="database-update">
<h3>Database update<a class="headerlink" href="#database-update" title="Permalink to this headline">¶</a></h3>
<p>The database backend of HRM contains all previously uploaded images and
created parameter sets and templates. Therefore it cannot simply be
deleted and replaced by a newer version.</p>
<p>HRM contains an option to easily update the database to the latest
version. Go to <em>Database update</em> from the main menu, on the right is an
update button which will automatically update the database to the latest
version. In order to get your system completely up to date, it is
advised to upgrade the version first and then update the database.</p>
</div>
<div class="section" id="system-configuration">
<h3>System configuration<a class="headerlink" href="#system-configuration" title="Permalink to this headline">¶</a></h3>
<p>HRM can be configured during the installation, afterwards these settings
are saved in a configuration file. If some settings need to be adjusted,
for example the maximum upload limit, both the PHP configuration and the
HRM configuration file must be edited. PHP states its limits, from which
HRM may differ if allowed by the PHP settings.</p>
<p>For example, the PHP configuration file states a max upload file size of
256MB, this is applicable to all programs using PHP, the HRM
configuration states that the max upload limit is 200MB, since 200MB is
lower than 256MB, the HRM configuration does not conflict with the PHP
configuration and 200MB is the maximum allowed file size.</p>
<p>The path to the PHP configuration file:</p>
<p><em>/path/to/php/php.ini</em></p>
<p>The path to the HRM configuration file:</p>
<p><em>/path/to/hrm/config/hrm_client_config.inc</em></p>
<p><img alt="image78" src="_images/HRMUserManual-62.gif" /></p>
<p>How HRM communicates with Huygens Core</p>
<p>For each deconvolution task in the job queue the HRM queue manager
automatically generates a Huygens Batch template for Huygens Core that</p>
<ul class="simple">
<li>loads the raw image from a source directory,</li>
<li>applies the microscopic parameters to it as defined by the user or
reads the microscopic parameters from the image metadata,</li>
<li>optionally loads another image containing the microscope Point Spread
Function,</li>
<li>deconvolves the image using the restoration parameters chosen by the
user,</li>
<li>stores the resulting restored image in a destination directory,</li>
<li>generates a number of visualizations of the raw and deconvolved
images so that the user can see the effect of the restoration,</li>
<li>and finally writes a tag in the destination directory to inform the
HRM queue manager that the job is finished.</li>
</ul>
<p>When the job is finished the queue manager optionally sends the user an
e-mail announcing the end of the job and its status. The administrator
may configure this.</p>
<p>Multiple jobs can be processed in parallel depending on how HRM is
configured, the multiprocessing capabilities of the server and the
number of available computation servers.</p>
<p><img alt="image79" src="_images/HRMUserManual-62.gif" /></p>
<p>Requirements and technical features</p>
<p>HRM consists of two main components: a web based interface and a queue
manager. The web interface allows:</p>
<ul class="simple">
<li>the management of users by the system administrator;</li>
<li>the management of parameter sets that all users can copy or use
directly;</li>
<li>the creation of deconvolution jobs, including image selection,
setting microscopic parameters, and setting restoration parameters;</li>
<li>inspecting the job queue status, and allowing the users to delete
their own jobs from it.</li>
<li>previewing and colocalization-analyzing deconvolved images, including
a slicer, MIP and SFP.</li>
</ul>
<p>HRM is equipped with a simple http file uploader/downloader to send raw
images from the user’s local machine to the HRM server, as well as to
retrieve the deconvolution results from the server. The server
administrator can set up a limit for these transactions.</p>
<p>The jobs created via the web interface are dispatched by the HRM queue
manager, which runs in the background, to any of the dedicated servers
running Huygens Core. When the job is finished, an e-mail may inform the
user that the restored datasets are available.</p>
<p>HRM requires:</p>
<ul class="simple">
<li>A web server with PHP and e-mail capabilities.</li>
<li>A database backend to store deconvolution parameters, job
descriptions and, optionally, user accounts.</li>
<li>A file server to temporarily store input and restored datasets.</li>
<li>One or more processing servers running Huygens Core.</li>
</ul>
<p>The setup is highly configurable, sincethe file server, the processing
servers and the queue manager can either be all hosted by the same
machine or be distributed across two, three or more computers.</p>
<hr class="docutils" />
<ol class="arabic simple">
<li><a class="reference external" href="http://sourceforge.net/projects/hrm">http://sourceforge.net/projects/hrm</a></li>
<li><a class="reference external" href="http://www.svi.nl/HuygensRemoteManager">http://www.svi.nl/HuygensRemoteManager</a></li>
<li><a class="reference external" href="http://www.huygens-rm.org">http://www.huygens-rm.org</a></li>
<li><a class="reference external" href="http://www.svi.nl/HrmInstallation">http://www.svi.nl/HrmInstallation</a></li>
<li><a class="reference external" href="http://hrm.svi.nl">http://hrm.svi.nl</a></li>
<li><a class="reference external" href="http://www.svi.nl/Colocalization">http://www.svi.nl/Colocalization</a></li>
<li><a class="reference external" href="http://hrm.svi.nl">http://hrm.svi.nl</a></li>
<li><a class="reference external" href="http://www.snapfiles.com/get/denrenamer.html">http://www.snapfiles.com/get/denrenamer.html</a></li>
<li><a class="reference external" href="http://www.svi.nl/NyquistRate">http://www.svi.nl/NyquistRate</a></li>
<li><a class="reference external" href="http://www.svi.nl/MismatchDistortsPsf">http://www.svi.nl/MismatchDistortsPsf</a></li>
<li><a class="reference external" href="http://www.svi.nl/MaximumIntensityProjection">http://www.svi.nl/MaximumIntensityProjection</a></li>
<li><a class="reference external" href="http://www.svi.nl/SFP">http://www.svi.nl/SFP</a></li>
<li><a class="reference external" href="http://www.svi.nl/ColocalizationBasics">http://www.svi.nl/ColocalizationBasics</a></li>
<li><a class="reference external" href="http://www.svi.nl/ColocalizationTheory">http://www.svi.nl/ColocalizationTheory</a></li>
<li><a class="reference external" href="http://www.svi.nl/2DHistogram">http://www.svi.nl/2DHistogram</a></li>
<li><a class="reference external" href="http://huygens-rm.org/home/">http://huygens-rm.org/home/</a></li>
<li><a class="reference external" href="http://huygens-rm.org/home/?q=node/6">http://huygens-rm.org/home/?q=node/6</a></li>
<li><a class="reference external" href="http://sourceforge.net/projects/hrm/">http://sourceforge.net/projects/hrm/</a></li>
<li><a class="reference external" href="http://huygens-rm.org/home/?q=node/5">http://huygens-rm.org/home/?q=node/5</a></li>
</ol>
</div>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, Aaron Ponti, Daniel Sevilla, Niko Ehrenfeuchter, Torsten Stoeter, Olivier Burri, Felix Meyenhofer.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>